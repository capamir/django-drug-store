{% load static %}
<!-- Django Messages START -->
{% if messages %}
  {% for message in messages %}
    <div
      class="alert alert-{{ message.tags|default:'info' }} fade show position-fixed start-0 bottom-0 z-index-99 rounded-3 shadow p-4 ms-3 mb-3 col-10 col-md-4 col-lg-3 col-xxl-2"
      role="alert"
      id="message-alert-{{ forloop.counter }}"
    >
      <div class="text-center">
        <!-- Dynamic Icon based on message type -->
        {% if message.tags == 'success' %}
          <i class="fas fa-check-circle text-success h-50px mb-3 fa-3x"></i>
        {% elif message.tags == 'error' %}
          <i class="fas fa-exclamation-triangle text-danger h-50px mb-3 fa-3x"></i>
        {% elif message.tags == 'warning' %}
          <i class="fas fa-exclamation-circle text-warning h-50px mb-3 fa-3x"></i>
        {% elif message.tags == 'info' %}
          <i class="fas fa-info-circle text-info h-50px mb-3 fa-3x"></i>
        {% else %}
          <i class="fas fa-bell text-primary h-50px mb-3 fa-3x"></i>
        {% endif %}
        
        <!-- Message Content -->
        <p class="mb-0 text-dark">
          {{ message|safe }}
        </p>
        
        <!-- Close Button -->
        <div class="mt-3">
          <button
            type="button"
            class="btn btn-{% if message.tags == 'error' %}danger{% elif message.tags == 'warning' %}warning{% elif message.tags == 'success' %}success{% else %}primary{% endif %}-soft btn-sm mb-0"
            data-bs-dismiss="alert"
            aria-label="Close"
          >
            <span aria-hidden="true">بستن</span>
          </button>
        </div>
      </div>
    </div>
  {% endfor %}
{% endif %}
<!-- Django Messages END -->

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Auto-hide success messages after 5 seconds
    const successMessages = document.querySelectorAll('.alert-success');
    successMessages.forEach(function(message) {
        setTimeout(function() {
            const alert = new bootstrap.Alert(message);
            alert.close();
        }, 5000);
    });
    
    // Auto-hide info messages after 4 seconds
    const infoMessages = document.querySelectorAll('.alert-info');
    infoMessages.forEach(function(message) {
        setTimeout(function() {
            const alert = new bootstrap.Alert(message);
            alert.close();
        }, 4000);
    });
});
</script>
