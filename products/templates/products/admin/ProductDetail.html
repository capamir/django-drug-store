{% extends "admin-base.html" %}
{% load static %}

{% block content %}
<!-- Title -->
<div class="row mb-3">
  <div class="col-12 d-sm-flex justify-content-between align-items-center">
    <h1 class="h3 mb-2 mb-sm-0 fs-5">جزئیات محصول</h1>
    <a href="{% url 'products:admin_product_edit' product.id %}" class="btn btn-sm btn-primary mb-0">ویرایش محصول</a>
  </div>
</div>

<div class="row g-4">
  <div class="col-12">
    <div class="card bg-transparent border rounded-3 h-100">
      <div class="card-header bg-light border-bottom">
        <h5 class="card-header-title">{{ product.name }}</h5>
      </div>
      <div class="card-body">
        <div class="row g-4">
          <div class="col-md-6">
            {% if product.image %}
              <img src="{{ product.image.url }}" class="rounded" alt="{{ product.name }}" />
            {% else %}
              <img src="{% static 'assets/images/courses/4by3/01.jpg' %}" class="rounded" alt="no image" />
            {% endif %}
          </div>
          <div class="col-md-6">
            <p class="mb-3">{{ product.description|default:"بدون توضیحات" }}</p>
            <h5 class="mb-3">{{ product.effective_unit_price|floatformat:0 }} ریال</h5>
            {% if product.category %}
              <span class="badge bg-info">{{ product.category.name }}</span>
            {% endif %}
            {% if product.recommended %}
              <span class="badge bg-warning">پیشنهادی</span>
            {% endif %}
            {% if not product.is_active %}
              <span class="badge bg-danger">غیرفعال</span>
            {% endif %}
          </div>
        </div>
        <div class="row mt-3">
          <div class="col-md-6">
            <ul class="list-group list-group-borderless">
              <li class="list-group-item"><span>کد محصول:</span> <span>{{ product.sku }}</span></li>
              <li class="list-group-item"><span>موجودی:</span> <span>{{ product.quantity }}</span></li>
              <li class="list-group-item"><span>حد هشدار:</span> <span>{{ product.reorder_level }}</span></li>
              <li class="list-group-item"><span>بارکد:</span> <span>{{ product.barcode|default:"-" }}</span></li>
            </ul>
          </div>
          <div class="col-md-6">
            <ul class="list-group list-group-borderless">
              <li class="list-group-item"><span>تخفیف درصدی:</span> <span>{{ product.discount_percent }}%</span></li>
              <li class="list-group-item"><span>تخفیف ثابت:</span> <span>{{ product.discount_per_unit|floatformat:0 }} ریال</span></li>
              <li class="list-group-item"><span>تاریخ ثبت:</span> <span>{{ product.date_joined|date:"Y-m-d" }}</span></li>
              <li class="list-group-item"><span>محصولات مرتبط:</span> 
                {% for rel in related_products %}
                  <span class="badge bg-primary">{{ rel.name }}</span>
                {% empty %}
                  <span class="text-muted">ندارد</span>
                {% endfor %}
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
